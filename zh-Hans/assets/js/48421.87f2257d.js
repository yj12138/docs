"use strict";(self.webpackChunkopenim_docs=self.webpackChunkopenim_docs||[]).push([[48421],{84764:(e,t,a)=>{a.d(t,{C:()=>o});var r=a(65733),i=a(72729),s=a(22906);const o=({name:e,time:t,now:a})=>(0,r.h)("div",{class:"head"},(0,r.h)("div",{class:"name"},(0,s.s)((0,s.f)(e),20)),(0,r.h)("div",{class:"time",title:(0,i.f)(t)},(0,i.e)(t,a)))},46871:(e,t,a)=>{a.d(t,{T:()=>s});var r=a(65733);function i(e){const t=/\*([^*]*)\*/g,a=/_([^_]*)_/g,r=/~([^~]*)~/g,i=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/;let s=t.exec(e);for(;s;)e=e.replace(s[0],`<b>${s[1]}</b>`),s=t.exec(e);let o=a.exec(e);for(;o;)e=e.replace(o[0],`<i>${o[1]}</i>`),o=a.exec(e);let n=r.exec(e);for(;n;)e=e.replace(n[0],`<s>${n[1]}</s>`),n=r.exec(e);return e=(e=(e=e.split(" ").map((e=>{if(i.test(e)){const t=i.exec(e);return e.replace(t[0],`<a class="link" href="${t[0]}">${t[0]}</a>`)}return e})).join(" ")).split("\n").map((e=>e.split(" ").map(((e,t)=>">"!==e||0!==t&&">"!==e[t-1]?e:'<span class="block-quote"></span>')).join(" "))).join("\n")).split("\n").map((e=>`<p>${e}</p>`)).join("\n")}const s=({message:e})=>(0,r.h)("p",{innerHTML:i(e)})},72729:(e,t,a)=>{a.d(t,{d:()=>r,e:()=>i,f:()=>s});const r=(e,t)=>{const a=t.getTime()-e.getTime();return Math.round(Math.abs(a/1e3/60))},i=(e,t)=>{const a=r(e,t);if(a<2)return"just now";if(a<60)return`${a}m ago`;const i=Math.round(a/60);if(a<90)return`about ${i}h ago`;if(i<24)return`${i}h ago`;const s=Math.round(i/24);if(s<7)return`${s}d ago`;return`${Math.round(s/7)}w ago`},s=e=>e.toDateString()+" "+e.toLocaleTimeString()},48421:(e,t,a)=>{a.r(t),a.d(t,{dyte_chat_message:()=>g,dyte_file_message:()=>y,dyte_image_message:()=>b,dyte_paginated_list:()=>L,dyte_text_message:()=>$});var r=a(65733),i=(a(21237),a(24555),a(96633)),s=a(20336),o=(a(60804),a(84764)),n=a(22906),d=a(96396),c=a(46503),l=a(82321),h=a(49797),p=a(46871);const g=class{constructor(e){(0,r.r)(this,e),this.edit=(0,r.c)(this,"edit",7),this.reply=(0,r.c)(this,"reply",7),this.delete=(0,r.c)(this,"delete",7),this.renderMessage=()=>{switch(this.message.type){case"text":return(0,r.h)("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&(0,r.h)("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),(0,r.h)("dyte-text-message",{message:this.message,now:this.now,isContinued:this.isContinued,"data-timestamp":this.message.time.getTime(),iconPack:this.iconPack,t:this.t,showBubble:!0}));case"image":return(0,r.h)("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&(0,r.h)("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),(0,r.h)("dyte-image-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,"data-timestamp":this.message.time.getTime(),t:this.t,showBubble:!0}));case"file":return(0,r.h)("div",{"is-continued":this.isContinued,key:this.message.id},this.isUnread&&(0,r.h)("div",{class:"new-chat-marker",part:"new-chat-marker"},this.t("chat.new")),(0,r.h)("dyte-file-message",{message:this.message,now:this.now,isContinued:this.isContinued,iconPack:this.iconPack,t:this.t,"data-timestamp":this.message.time.getTime(),showBubble:!0}))}},this.onReply=()=>{this.reply.emit(this.message)},this.onDelete=()=>{this.delete.emit(this.message)},this.onEdit=async()=>{this.edit.emit(this.message)},this.isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,this.message=void 0,this.isContinued=void 0,this.isUnread=void 0,this.size=void 0,this.iconPack=i.d,this.t=(0,s.u)(),this.isSelf=!1,this.canEdit=!1,this.canDelete=!1,this.disableControls=!1,this.alignRight=!1,this.senderDisplayPicture=void 0,this.hideAvatar=!1,this.now=new Date}renderControls(){if(!this.disableControls)return(0,r.h)("dyte-menu",{placement:this.alignRight?"bottom-end":"bottom-start"},(0,r.h)("button",{slot:"trigger",class:"actions"},(0,r.h)("dyte-icon",{icon:this.iconPack.chevron_down})),(0,r.h)("dyte-menu-list",null,(0,r.h)("dyte-menu-item",{onClick:this.onReply},(0,r.h)("dyte-icon",{icon:this.iconPack.back,slot:"start"}),this.t("chat.reply")),this.canEdit&&(0,r.h)("dyte-menu-item",{onClick:this.onEdit},(0,r.h)("dyte-icon",{icon:this.iconPack.edit,slot:"start"}),this.t("chat.edit_msg")),this.canDelete&&(0,r.h)("dyte-menu-item",{onClick:this.onDelete},(0,r.h)("dyte-icon",{icon:this.iconPack.delete,slot:"start"}),this.t("chat.delete_msg"))))}renderAvatar(){if(!this.hideAvatar)return this.isContinued?(0,r.h)("div",{class:"avatar"}):(0,r.h)("div",{class:"avatar"},(0,r.h)("dyte-avatar",{size:"sm",participant:{name:this.message.displayName,picture:this.senderDisplayPicture}}))}render(){return(0,r.h)(r.H,null,(0,r.h)("div",{class:{"message-wrapper":!0,"align-right":this.alignRight}},this.renderAvatar(),(0,r.h)("div",{class:{message:!0,"show-on-hover":!this.isTouchDevice()},"is-continued":this.isContinued},this.renderMessage(),this.renderControls())))}get $el(){return(0,r.g)(this)}};g.style=".message-wrapper{display:flex;gap:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-4, 16px);margin-right:var(--dyte-space-4, 16px)}.message-wrapper.align-right{flex-direction:row-reverse}.avatar{display:none}.file-picker{display:none}.message{position:relative;display:flex}.show-on-hover dyte-menu{visibility:hidden}.show-on-hover:hover dyte-menu{visibility:visible}.align-right .message{justify-content:flex-end;margin-left:auto}.align-right .message .head{margin-right:var(--dyte-space-1, 4px);margin-left:var(--dyte-space-0, 0px);flex-direction:row-reverse;gap:var(--dyte-space-4, 16px)}.align-right .message dyte-text-message .bubble,.align-right .message dyte-image-message .bubble,.align-right .message dyte-file-message .bubble{padding-right:var(--dyte-space-5, 20px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .message .actions dyte-icon{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right dyte-menu{left:auto;right:var(--dyte-space-0, 0px)}.head{margin-bottom:var(--dyte-space-2, 8px);margin-left:var(--dyte-space-1, 4px);display:flex;align-items:center;gap:var(--dyte-space-2, 8px)}.head .name{font-size:14px;font-weight:600}.head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}dyte-menu{position:absolute;left:var(--dyte-space-0, 0px);top:var(--dyte-space-6, 24px);border-radius:var(--dyte-border-radius-lg, 12px)}dyte-menu dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px);cursor:pointer}[is-continued] dyte-menu{top:var(--dyte-space-2, 8px)}.actions{display:flex;align-items:center;justify-content:center;padding:var(--dyte-space-0\\.5, 2px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}.actions dyte-icon{height:var(--dyte-space-4, 16px);width:var(--dyte-space-4, 16px)}.body{margin-top:var(--dyte-space-1, 4px);margin-bottom:var(--dyte-space-1, 4px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.body .emoji{font-size:24px}.body.bubble{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-1, 4px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);padding-left:var(--dyte-space-5, 20px);padding-right:var(--dyte-space-5, 20px);overflow-wrap:break-word;font-size:14px;line-height:1.375;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}.body.bubble p{margin:var(--dyte-space-0, 0px)}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-0, 0px)}.image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.file .file-data{flex:1 1 0%}.file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.new-chat-marker{display:flex;width:100%;align-items:center;gap:var(--dyte-space-2, 8px);--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}.new-chat-marker::before{content:'';height:1px;flex:1 1 0%;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / 0.5)}.show-new-messages-ctr{pointer-events:none;display:flex;justify-content:flex-end;padding:var(--dyte-space-3, 12px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}.block-quote{--tw-border-spacing-x:1px;--tw-border-spacing-y:1px;border-spacing:var(--tw-border-spacing-x) var(--tw-border-spacing-y);border-top-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-none, 0);border-left-width:var(--dyte-border-width-md, 2px);border-right-width:var(--dyte-border-width-none, 0);border-style:solid;border-left-color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding:var(--dyte-space-0\\.5, 2px);padding-left:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px) !important;border-radius:var(--dyte-border-radius-sm, 4px);border-top-left-radius:var(--dyte-border-radius-none, 0);border-bottom-left-radius:var(--dyte-border-radius-none, 0)}.link{color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88))}.align-right .block-quote{border-color:rgb(var(--dyte-colors-text-on-brand-600, var(--dyte-colors-text-600, 255 255 255 / 0.52)));--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-bg-opacity))}.align-right .link{color:rgb(var(--dyte-colors-text-on-brand-1000, var(--dyte-colors-text-1000, 255 255 255)))}.align-right .image .actions dyte-icon{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}@media (orientation: landscape) and (min-width: 400px){.avatar{display:flex;width:var(--dyte-space-10, 40px)}.avatar dyte-avatar{height:var(--dyte-space-9, 36px);width:var(--dyte-space-9, 36px)}.message{width:75%}}";const y=class{constructor(e){(0,r.r)(this,e),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=i.d,this.t=(0,s.u)(),this.showBubble=!1}render(){const e=(0,n.a)(this.message.link);return(0,r.h)(r.H,null,!this.isContinued&&(0,r.h)(o.C,{name:this.message.displayName,time:this.message.time,now:this.now}),(0,r.h)("div",{class:{body:!0,bubble:this.showBubble},part:"body"},(0,r.h)("div",{class:"file"},(0,r.h)("div",{class:"file-data"},(0,r.h)("div",{class:"name"},this.message.name),(0,r.h)("div",{class:"file-data-split"},(0,r.h)("div",{class:"ext"},(0,d.g)(this.message.name)),(0,r.h)("span",{class:"divider"}),(0,r.h)("div",{class:"size"},(0,d.a)(this.message.size)))),(0,r.h)("dyte-button",{variant:"secondary",kind:"icon",iconPack:this.iconPack,t:this.t,onClick:()=>(0,d.d)(e,{name:this.message.name,fallbackName:"file"}),part:"button"},(0,r.h)("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t})))))}},b=class{constructor(e){(0,r.r)(this,e),this.stateUpdate=(0,r.c)(this,"dyteStateUpdate",7),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=i.d,this.t=(0,s.u)(),this.showBubble=!1,this.status="loading"}render(){return(0,r.h)(r.H,null,!this.isContinued&&(0,r.h)(o.C,{name:this.message.displayName,time:this.message.time,now:this.now}),(0,r.h)("div",{class:{body:!0,bubble:this.showBubble},part:"body"},(0,r.h)("div",{class:{image:!0,loaded:"loaded"===this.status}},(0,r.h)("img",{src:(0,n.a)(this.message.link),onLoad:()=>{this.status="loaded"},onError:()=>{this.status="errored"},onClick:()=>{"loaded"===this.status&&(this.stateUpdate.emit({image:this.message}),c.s.image=this.message)}}),"loading"===this.status&&(0,r.h)("div",{class:"image-spinner",title:this.t("chat.img.loading"),"aria-label":this.t("chat.img.loading")},(0,r.h)("dyte-spinner",{iconPack:this.iconPack,t:this.t})),"errored"===this.status&&(0,r.h)("div",{class:"image-errored",title:this.t("chat.error.img_not_found"),"aria-label":this.t("chat.error.img_not_found")},(0,r.h)("dyte-icon",{icon:this.iconPack.image_off,iconPack:this.iconPack,t:this.t})),"loaded"===this.status&&(0,r.h)("div",{class:"actions"},(0,r.h)("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>{this.stateUpdate.emit({image:this.message}),c.s.image=this.message},iconPack:this.iconPack,t:this.t},(0,r.h)("dyte-icon",{icon:this.iconPack.full_screen_maximize})),(0,r.h)("dyte-button",{class:"action",variant:"secondary",kind:"icon",onClick:()=>(0,d.d)(this.message.link,{fallbackName:"image"}),iconPack:this.iconPack,t:this.t},(0,r.h)("dyte-icon",{icon:this.iconPack.download,iconPack:this.iconPack,t:this.t}))))))}};b.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.image-spinner{cursor:wait}.image-errored{cursor:not-allowed}";var m="[object Symbol]";var v=/\s/;var u=/^\s+/;function w(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&v.test(e.charAt(t)););return t}(e)+1).replace(u,""):e}var f=NaN,x=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,T=/^0o[0-7]+$/i,P=parseInt;function R(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||(0,h.a)(e)&&(0,h.b)(e)==m}(e))return f;if((0,h.i)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,h.i)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=w(e);var a=k.test(e);return a||T.test(e)?P(e.slice(2),a?2:8):x.test(e)?f:+e}var C=function(){return h.r.Date.now()},N=Math.max,z=Math.min;function _(e,t,a){var r,i,s,o,n,d,c=0,l=!1,p=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var a=r,s=i;return r=i=void 0,c=t,o=e.apply(s,a)}function b(e){var a=e-d;return void 0===d||a>=t||a<0||p&&e-c>=s}function m(){var e=C();if(b(e))return v(e);n=setTimeout(m,function(e){var a=t-(e-d);return p?z(a,s-(e-c)):a}(e))}function v(e){return n=void 0,g&&r?y(e):(r=i=void 0,o)}function u(){var e=C(),a=b(e);if(r=arguments,i=this,d=e,a){if(void 0===n)return function(e){return c=e,n=setTimeout(m,t),l?y(e):o}(d);if(p)return clearTimeout(n),n=setTimeout(m,t),y(d)}return void 0===n&&(n=setTimeout(m,t)),o}return t=R(t)||0,(0,h.i)(a)&&(l=!!a.leading,s=(p="maxWait"in a)?N(R(a.maxWait)||0,t):s,g="trailing"in a?!!a.trailing:g),u.cancel=function(){void 0!==n&&clearTimeout(n),c=0,r=d=i=n=void 0},u.flush=function(){return void 0===n?o:v(C())},u}const L=class{constructor(e){(0,r.r)(this,e),this.pagesToRender=[[]],this.currentTime=()=>(new Date).getTime(),this.observe=e=>{e&&this.intersectionObserver.observe(e)},this.pageSize=void 0,this.pagesAllowed=void 0,this.fetchData=void 0,this.createNodes=void 0,this.selectedItemId=void 0,this.autoScroll=!0,this.iconPack=i.d,this.t=(0,s.u)(),this.emptyListLabel=null,this.isLoading=!1,this.rerenderBoolean=!1,this.shouldRenderNewNodes=!0,this.hasNewNodesToRender=!1,this.showEmptyListLabel=!1}async onNewNode(e){this.shouldRenderNewNodes?(this.addNodeToRender(e,!1),this.rerender()):this.hasNewNodesToRender=!0}async onNodeDelete(e){const t=this.pagesToRender.flat().length;this.pagesToRender=this.pagesToRender.map((t=>t.filter((t=>t.id!==e)))),t!==this.pagesToRender.flat().length&&this.rerender()}async onNodeUpdate(e,t){let a=!1;this.pagesToRender=this.pagesToRender.map((r=>r.map((r=>r.id===e?(a=!0,t):r)))),a&&this.rerender()}onItemChanged(e,t){e!==t&&(this.pagesToRender=[[]],this.loadFirstPage().then((()=>this.rerender())))}connectedCallback(){this.rerender=_(this.rerender.bind(this),50,{maxWait:200}),this.loadFirstPage(),this.intersectionObserver=new IntersectionObserver((e=>{(0,r.w)((()=>{for(const t of e)"bottom-scroll"===t.target.id&&(t.isIntersecting?this.loadBottom():this.shouldRenderNewNodes=!1),"top-scroll"===t.target.id&&t.isIntersecting&&this.loadTop()}))}))}disconnectedCallback(){this.intersectionObserver.disconnect()}componentDidLoad(){this.observe(this.$topRef),this.observe(this.$bottomRef)}componentDidRender(){this.shouldRenderNewNodes&&this.autoScroll&&(0,l.s)(this.$paginatedList)}loadFirstPage(){return this.loadPage(this.currentTime(),this.pageSize,!0,(e=>{0===e.length&&(this.showEmptyListLabel=!0)}))}loadTop(){if(0===this.pagesToRender.length)return;if(1===this.pagesToRender.length&&this.pagesToRender[0].length<this.pageSize)return;const e=this.pagesToRender[0][0].timeMs;this.loadPage(e-1,this.pageSize,!0,(()=>{}))}loadBottom(){if(0===this.pagesToRender.length)return void(this.shouldRenderNewNodes=!0);if(1===this.pagesToRender.length&&this.pagesToRender[0].length<this.pageSize)return void(this.shouldRenderNewNodes=!0);const e=this.pagesToRender.at(-1).at(-1).timeMs;this.loadPage(e+1,this.pageSize,!1,(()=>(0,l.s)(this.$paginatedList)))}addNodeToRender(e,t){if(t){const t=this.pagesToRender[0];if(t&&(null==t?void 0:t.length)<this.pageSize)t.unshift(e);else{const t=[e];this.pagesToRender.unshift(t),this.removeLastPageIfNeeded(!1)}}else{const[t]=this.pagesToRender.slice(-1);if(t&&(null==t?void 0:t.length)<this.pageSize)t.push(e);else{const t=[e];this.pagesToRender.push(t),this.removeLastPageIfNeeded(!0)}}}async loadPage(e,t,a,r=(()=>{})){this.isLoading=!0;const i=await this.fetchData(e,t,a);if(this.isLoading=!1,!(null==i?void 0:i.length))return a||(this.hasNewNodesToRender=!1,this.shouldRenderNewNodes=!0),void r([]);i.forEach((e=>this.addNodeToRender(e,a))),this.rerender(),r(i)}rerender(){this.rerenderBoolean=!this.rerenderBoolean}removeLastPageIfNeeded(e){this.pagesToRender.length>this.pagesAllowed&&(e?this.pagesToRender.shift():this.pagesToRender.pop())}onDownArrowClicked(){this.loadBottom()}render(){var e;return(0,r.h)(r.H,null,(0,r.h)("div",{class:"scrollbar container",part:"container",ref:e=>this.$paginatedList=e},(0,r.h)("div",{class:"show-new-messages-ctr"},(0,r.h)("dyte-button",{class:{"show-new-messages":!0,active:!this.shouldRenderNewNodes},kind:"icon",part:"show-new-messages",onClick:()=>this.onDownArrowClicked(),iconPack:this.iconPack,t:this.t},(0,r.h)("dyte-icon",{icon:this.iconPack.chevron_down,iconPack:this.iconPack,t:this.t}))),(0,r.h)("div",{class:"smallest-dom-element",id:"bottom-scroll",ref:e=>this.$bottomRef=e}),this.isLoading&&0===this.pagesToRender.flat().length&&(0,r.h)("dyte-spinner",{size:"lg"}),0===this.pagesToRender.flat().length&&this.showEmptyListLabel?(0,r.h)("div",{class:"empty-list"},null!==(e=this.emptyListLabel)&&void 0!==e?e:this.t("list.empty")):(0,r.h)("div",{class:"page-wrapper"},this.pagesToRender.map((e=>this.createNodes(e)))),(0,r.h)("div",{class:"smallest-dom-element",id:"top-scroll",ref:e=>this.$topRef=e})))}static get watchers(){return{selectedItemId:["onItemChanged"]}}};L.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{position:relative;display:flex;flex-direction:column;flex:1}.container{box-sizing:border-box;display:flex;flex-direction:column-reverse;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll;}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.375}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;gap:var(--dyte-space-1, 4px);padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{word-break:break-all;color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}.smallest-dom-element{width:1px}#top-scroll{transform:translateY(20vh)}#bottom-scroll{transform:translateY(-20vh)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.show-new-messages-ctr{pointer-events:none;position:absolute;bottom:var(--dyte-space-2, 8px);right:var(--dyte-space-4, 16px);z-index:0;margin-top:calc(var(--dyte-space-14, 56px) * -1)}.show-new-messages{pointer-events:auto;--tw-translate-y:calc(var(--dyte-space-6, 24px) * -1);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:0;transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.show-new-messages.active{--tw-translate-y:var(--dyte-space-0, 0px);transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));opacity:1}dyte-spinner,.empty-list{margin:auto}";const $=class{constructor(e){(0,r.r)(this,e),this.message=void 0,this.now=new Date,this.isContinued=!1,this.iconPack=i.d,this.t=(0,s.u)(),this.showBubble=!1}render(){return(0,r.h)(r.H,null,!this.isContinued&&(0,r.h)(o.C,{name:this.message.displayName,time:this.message.time,now:this.now}),(0,r.h)("div",{class:{body:!0,bubble:this.showBubble},part:"body"},(0,r.h)("div",{class:{text:!0,emoji:(0,n.h)(this.message.message)}},(0,r.h)(p.T,{message:this.message.message}))))}}},96396:(e,t,a)=>{a.d(t,{a:()=>s,d:()=>o,g:()=>i});var r=a(22906);const i=e=>e.split(/[#?]/)[0].split(".").pop().trim(),s=e=>{if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/1024**t).toFixed(2)} ${["B","kB","MB","GB","TB"][t]}`},o=async(e,t)=>{e=(0,r.a)(e);let a=null==t?void 0:t.name;const i=await fetch(e);if(!i.ok)return void window.open(e,"_blank");const s=URL.createObjectURL(await i.blob()),o=document.createElement("a");o.href=s,o.download=null!=a?a:((e,t="file")=>{try{const a=new URL(e).pathname.split("/").pop();return"/"!==a?a:t}catch(a){return t}})(e,null==t?void 0:t.fallbackName),o.click()}},82321:(e,t,a)=>{a.d(t,{s:()=>r});const r=(e,t=!0)=>{null!=e&&e.scrollTo({top:e.scrollHeight,behavior:t?"smooth":"auto"})}},46503:(e,t,a)=>{a.d(t,{o:()=>c,s:()=>d});var r=a(65733);const i=e=>!("isConnected"in e)||e.isConnected,s=((e,t)=>{let a;return(...r)=>{a&&clearTimeout(a),a=setTimeout((()=>{a=0,e(...r)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(i))}),2e3),o=e=>"function"==typeof e?e():e,n=(e,t)=>{const a=e.indexOf(t);a>=0&&(e[a]=e[e.length-1],e.length--)},{state:d,onChange:c}=((e,t)=>{const a=((e,t=((e,t)=>e!==t))=>{const a=o(e);let r=new Map(Object.entries(null!=a?a:{}));const i={dispose:[],get:[],set:[],reset:[]},s=()=>{var t;r=new Map(Object.entries(null!==(t=o(e))&&void 0!==t?t:{})),i.reset.forEach((e=>e()))},d=e=>(i.get.forEach((t=>t(e))),r.get(e)),c=(e,a)=>{const s=r.get(e);t(a,s,e)&&(r.set(e,a),i.set.forEach((t=>t(e,a,s))))},l="undefined"==typeof Proxy?{}:new Proxy(a,{get:(e,t)=>d(t),ownKeys:e=>Array.from(r.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>r.has(t),set:(e,t,a)=>(c(t,a),!0)}),h=(e,t)=>(i[e].push(t),()=>{n(i[e],t)});return{state:l,get:d,set:c,on:h,onChange:(t,a)=>{const r=h("set",((e,r)=>{e===t&&a(r)})),i=h("reset",(()=>a(o(e)[t])));return()=>{r(),i()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(h("set",t.set)),t.get&&e.push(h("get",t.get)),t.reset&&e.push(h("reset",t.reset)),t.dispose&&e.push(h("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{i.dispose.forEach((e=>e())),s()},reset:s,forceUpdate:e=>{const t=r.get(e);i.set.forEach((a=>a(e,t,t)))}}})(e,t);return a.use((()=>{if("function"!=typeof r.a)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const a=(0,r.a)();a&&((e,t,a)=>{const r=e.get(t);r?r.includes(a)||r.push(a):e.set(t,[a])})(e,t,a)},set:t=>{const a=e.get(t);a&&e.set(t,a.filter(r.f)),s(e)},reset:()=>{e.forEach((e=>e.forEach(r.f))),s(e)}}})()),a})({})},22906:(e,t,a)=>{a.d(t,{a:()=>s,f:()=>o,g:()=>n,h:()=>i,s:()=>r});const r=(e,t=20)=>null==e?"":e.length>t?`${e.substring(0,t)}...`:e,i=e=>/^\p{Emoji}+$/u.test(e)&&!/^\d+$/.test(e),s=e=>(null==e?void 0:e.trim().toLowerCase().startsWith("javascript:"))?"https://dyte.io":e,o=e=>""===(e=null==e?void 0:e.trim())?"Participant":e;function n(e,t=2){return e.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,t).map((e=>e.charAt(0))).join("").toUpperCase()}}}]);